<!--
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0">
</head>
-->
<h2>{{shop.name}}管理平台</h2>
<button class="btn btn-info" ng-click="editShop()">编辑商店</button>
<button class="btn btn-info" ng-click="newGroupbuy()">新的团购</button>

<h3>当前团购</h3>

<uib-accordion close-others="true">
    <uib-accordion-group heading="{{gb.batchId}}{{gb.title}}" is-open="false" ng-repeat="gb in groupbuyList">
        <button class="btn btn-info" ng-click="editGroupbuy(gb)">编辑团购</button>
        <button class="btn btn-info" ng-click="gotoGroupbuy(gb._id)">团购链接</button> 
        <button class="btn btn-info" ng-click="gotoGroupbuyOrders(gb._id)">手机后台</button>
        <button class="btn btn-info" ng-click="gotoGroupbuyOrders_table(gb._id)">表格后台</button>
        <button class="btn btn-danger" ng-click="removeGroupbuy(gb._id)">删除团购</button>
    </uib-accordion-group>   
</uib-accordion>

<!--
<table class="table">
    <thead>
        <tr>
            <th>团购</th>
            <th>操作</th>
        </tr>
    </thead>
    <tbody>
        <tr ng-repeat="gb in groupbuyList">
            <td>{{gb.batchId}}{{gb.title}}</td>
            <td>
                <button class="btn btn-info" ng-click="editGroupbuy(gb)">编辑团购</button>
                <button class="btn btn-info" ng-click="gotoGroupbuy(gb._id)">团购链接</button> 
                <button class="btn btn-info" ng-click="gotoGroupbuyOrders(gb._id)">团购后台</button>
                <button class="btn btn-danger" ng-click="removeGroupbuy(gb._id)">删除团购</button>
            </td>
        </tr>
    </tbody>
</table>
-->
<!-- Modal -->
<div ng-controller="shopCtrl">
    <script type="text/ng-template" id="newGroupBuy.html">
        <div class="modal-header">
            <div ng-if="editMode == true">
                <h3 class="modal-title">编辑团购</h3>
            </div>
            <div ng-if="editMode != true">
                <h3 class="modal-title">新的团购</h3>
            </div>
        </div>
        <div class="modal-body">
            团购标题
            <input class="form-control" ng-model="groupbuy.title"> 
            团购描述
            <textarea class="form-control" rows="3" ng-model="groupbuy.description"></textarea>
            照片链接
            <input class="form-control" ng-model="groupbuy.photoLink"> 
            批次
            <input class="form-control" ng-model="groupbuy.batchId">
            <div data-ng-repeat="item in items">
                商品名
                <input class="form-control" ng-model="items[$index].item_name" ng-disabled="editMode"> 价格
                <input class="form-control" ng-model="items[$index].item_price"> 库存
                <input class="form-control" ng-model="items[$index].stock_count">
                <div ng-if="editMode != true">
                    <button ng-click="removeItem($index)" class="btn btn-danger">删除这个商品</button>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <div ng-if="editMode != true" style="float:left">
                <button class="btn btn-warning" type="button" ng-click="addItem()">增加商品</button>
            </div>
            <button class="btn btn-primary" type="button" ng-click="ok()">保存</button>
            <button class="btn btn-warning" type="button" ng-click="cancel()">取消</button>
        </div>
    </script>
</div>

<div ng-controller="shopCtrl">
    <script type="text/ng-template" id="newShop.html">
        <div class="modal-header">
            <h3 class="modal-title">Edit Shop</h3>
        </div>
        <div class="modal-body">
            商店名称
            <input class="form-control" ng-model="shop.name"> 
            email
            <input class="form-control" ng-model="shop.email"> 
            电话
            <input class="form-control" ng-model="shop.phone_number"> 
            地址
            <input class="form-control" ng-model="shop.address">
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" type="button" ng-click="ok()">保存</button>
            <button class="btn btn-warning" type="button" ng-click="cancel()">取消</button>
        </div>
    </script>
</div>


